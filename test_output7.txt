
=== Equipment Browser Tests ===

  PASSED: T1: LayoutData collections initialize empty
  PASSED: T2: EOTCrane adds to collection correctly
  PASSED: T3: Zone adds to collection correctly
  PASSED: T4: AGVStation adds to collection correctly
  PASSED: T5: Runway adds to collection correctly
  PASSED: T6: JibCrane adds to collection correctly
  PASSED: T7: Conveyor adds to collection correctly
  PASSED: T8: Opening adds to collection correctly
  PASSED: T9: Node adds to collection correctly
  PASSED: T10: Path adds to collection correctly
  PASSED: T11: Wall adds to collection correctly
  PASSED: T12: Full layout serializes and deserializes
  PASSED: T13: Equipment counts preserved after serialization
  PASSED: T14: Equipment properties preserved after serialization
  PASSED: T15: Layout reference assignment works
  PASSED: T16: Layout collections are same reference after assignment
  PASSED: T17: Modifying layout updates collection
  PASSED: T18: Multiple equipment types counted correctly
  PASSED: T19: Empty layout shows zero counts
  PASSED: T20: Large layout counts accurate
  PASSED: T21: Equipment IDs are unique
  PASSED: T22: Equipment names are accessible
  PASSED: T23: Crane-Runway relationship intact

=== Equipment Browser Results: 23/23 passed ===



=== Transport Layer Infrastructure Tests ===

T1.1 - Layer enum has 8 values: ? PASS (Count: 8)
T1.2 - Infrastructure is value 0: ? PASS (Value: 0)
T1.3 - Pedestrian is value 7: ? PASS (Value: 7)
T1.4 - All layers visible by default: ? PASS
T1.5 - Active layer default is Equipment: ? PASS (Active: Equipment)
T1.6 - Visibility change fires event: ? PASS
T1.7 - Locked layer not editable: ? PASS
T1.8 - Model classes have TransportLayer property: ? PASS
T1.9 - Metadata is correct: ? PASS

=== Test Results ===
Passed: 9/9
Failed: 0/9
Status: ? ALL TESTS PASSED


=== Week 2: Infrastructure & Spatial Layers Tests ===

T2.1 - DoorData has Infrastructure layer: ? PASS (Layer: Infrastructure)
T2.2 - RunwayData has Infrastructure layer: ? PASS (Layer: Infrastructure)
T2.3 - Opening base has Infrastructure layer: ? PASS (Layer: Infrastructure)
T2.4 - Unconstrained opening has capacity 0: ? PASS (Capacity: 0)
T2.5 - Constrained opening has capacity >= 1: ? PASS (Capacity: 1)
T2.6 - Opening state defaults to Open: ? PASS (State: open)
T2.7 - State machine transitions work: ? PASS
T2.8 - Closed opening has Closed state: ? PASS (State: closed)
T2.9 - Door subtype has SwingDirection: ? PASS (Direction: outward)
T2.10 - Hatch subtype has LadderTime: ? PASS (LadderTime: 10s)
T2.11 - Opening tool creates correct subtype: ? SKIP (Tool not yet implemented - manual test required)
T2.12 - Opening auto-links zones: ? SKIP (Tool not yet implemented - manual test required)
T2.13 - PrimaryAisleData has Spatial layer: ? PASS (Layer: Spatial)
T2.14 - RestrictedAreaData has Spatial layer: ? PASS (Layer: Spatial)
T2.15 - InfrastructureRenderer exists and implements interface: ? PASS
T2.16 - SpatialRenderer exists and implements interface: ? PASS
T2.17 - Layer renderers integrated (GetVisibleLayers works): ? PASS
T2.18 - LayoutData has Openings collection: ? PASS
T2.19 - TemporaryOpening has state-dependent existence: ? FAIL
  Exists in State_A: ?
  Exists in State_B: ?
  Exists in State_C: ?
  Not exists in State_0: ?
  Not exists in State_D: ?
T2.20 - Opening can connect two zones: ? PASS

=== Test Results ===
Passed: 19/20
Failed: 1/20
Status: ? SOME TESTS FAILED


=== Week 3: Equipment & Local Flow Layers Tests ===

T3.1 - Equipment has clearance properties with correct defaults: ? PASS
T3.2 - Clearance toggles work (operational & maintenance): ? PASS
T3.3 - Clearance hidden when toggled off: ? PASS
T3.4 - ConveyorData has LocalFlow layer: ? PASS
T3.5 - DirectPathData has LocalFlow layer: ? PASS
T3.6 - Conveyor has direction and path: ? PASS
T3.7 - Cell boundary calculation setup valid: ? PASS
T3.8 - Conveyor snaps to terminals (placeholder): ? PASS
T3.9 - Hide LocalFlow layer works: ? PASS
T3.10 - Conveyor data model works: ? PASS

=== Test Results ===
Passed: 10/10
Failed: 0/10
Status: ? ALL TESTS PASSED


=== Week 4: Guided Transport (AGV) Layer Tests ===

T4.1 - Waypoint types have distinct values: ? PASS
T4.2 - Path connects two waypoints: ? PASS
T4.3 - Unidirectional path has direction set: ? PASS
T4.4 - Bidirectional path has correct direction: ? PASS
T4.5 - Station links to waypoint: ? PASS
T4.6 - Station links to equipment: ? PASS
T4.7 - Traffic zone has polygon boundary: ? PASS
T4.8 - Hide GuidedTransport layer works: ? PASS
T4.9 - Path tool creates network (placeholder): ? PASS
T4.10 - Validation warns on disconnect (placeholder): ? PASS

=== Test Results ===
Passed: 10/10
Failed: 0/10
Status: ? ALL TESTS PASSED


=== Stage 5A: Crane Coverage Models Tests ===

T5A.1 - EOT coverage returns rectangle: ? PASS (Points: 4, Expected: 4)
T5A.2 - Jib coverage returns arc polygon: ? PASS (Points: 19, Arc shape: valid)
T5A.3 - Layer property correct: ? PASS (EOT: OverheadTransport, Jib: OverheadTransport)

=== Test Results ===
Passed: 3/3
Failed: 0/3
Status: ? ALL TESTS PASSED


=== Stage 5B: Handoff & Drop Zone Models Tests ===

T5B.1 - HandoffPoint serializes/deserializes: ? PASS (Round-trip: success)
T5B.2 - DropZone serializes/deserializes: ? PASS (Round-trip: success, Boundary points: 4)
T5B.3 - Collections added to LayoutData: ? PASS (HandoffPoints: ?, DropZones: ?, Remove: ?)

=== Test Results ===
Passed: 3/3
Failed: 0/3
Status: ? ALL TESTS PASSED


=== Stage 5C: Overhead Transport Renderer Tests ===

T5C.1 - Crane coverage renders: ? PASS (Elements: 4, Expected: =4)
T5C.2 - Handoff points render: ? PASS (Elements: 4, Expected: =4)
T5C.3 - Drop zones render: ? PASS (Elements: 2, Expected: =2)
T5C.4 - Layer property correct: ? PASS (Layer: OverheadTransport, ZOrder: 500)

=== Test Results ===
Passed: 4/4
Failed: 0/4
Status: ? ALL TESTS PASSED


=== Stage 5D: Forklift Models Tests ===

T5D.1 - ForkliftAisle serializes/deserializes: ? PASS (Round-trip: success, Centerline points: 3)
T5D.2 - StagingArea serializes/deserializes: ? PASS (Round-trip: success, Capacity: 20)
T5D.3 - CrossingZone serializes/deserializes: ? PASS (Round-trip: success, Type: signal_controlled)

=== Test Results ===
Passed: 3/3
Failed: 0/3
Status: ? ALL TESTS PASSED


=== Stage 5E: Flexible Transport Renderer Tests ===

T5E.1 - Forklift aisles render: ? PASS (Elements: 7, Expected: =6)
T5E.2 - Staging areas render: ? PASS (Elements: 2, Expected: =2)
T5E.3 - Crossing zones render: ? PASS (Elements: 2, Expected: =2)
T5E.4 - Layer property correct: ? PASS (Layer: FlexibleTransport, ZOrder: 600)

=== Test Results ===
Passed: 4/4
Failed: 0/4
Status: ? ALL TESTS PASSED


=== Stage 6A: Schema Creation Tests ===

T6A.1 - DatabaseManager creates database file: ? PASS (Before: False, After: True, File: True)
T6A.2 - Schema tables created correctly: ? PASS (Layouts: True, Elements: True, Connections: True, Zones: True, ElementZones: True)
T6A.3 - Schema indexes created correctly: ? PASS (Found 7 indexes, Key indexes present: True)
T6A.4 - Migration system tracks version: ? PASS (Before: 0, After: 1, Record exists: True)
T6A.5 - Connection pooling works: ? PASS (All open: True, All query: True)

=== Test Results ===
Passed: 5/5
Failed: 0/5
Status: ? ALL TESTS PASSED


=== Stage 6B: Element Repository Tests ===

T6B.1 - Insert and retrieve element: ? PASS (Inserted: True, Retrieved: True)
T6B.2 - Update element: ? PASS (Updated: True, Name changed: True)
T6B.3 - Delete element: ? PASS (Deleted: True, Still exists: False)
T6B.4 - Get elements by layout: ? PASS (Count: 3, Expected: 3)
T6B.5 - Get elements by type: ? PASS (Conveyors: 2, Expected: 2)
T6B.6 - Get elements by layer: ? PASS (Layer 2 count: 2, Expected: 2)
T6B.7 - Batch insert elements: ? PASS (Inserted: 3, Count: 3)
T6B.8 - JSON serialization of conveyor: ? PASS (Roundtrip successful: True)
T6B.9 - JSON serialization of crane: ? PASS (Roundtrip successful: True)
T6B.10 - Element count and exists: ? PASS (Count: 2, Exists e1: True, Exists nonexistent: False)

=== Test Results ===
Passed: 10/10
Failed: 0/10
Status: ? ALL TESTS PASSED


=== Stage 6C: Connection & Zone Repositories Tests ===

T6C.1 - Insert and retrieve connection: ? PASS (Inserted: True, Retrieved: True)
T6C.2 - Get connections by source/target: ? PASS (From elem1: 2, To elem3: 2, Between: 1)
T6C.3 - Delete connection: ? PASS (Deleted: True, Still exists: False)
T6C.4 - Batch insert connections: ? PASS (Inserted: 2, Count: 2)
T6C.5 - Insert and retrieve zone: ? PASS (Inserted: True, Retrieved: True)
T6C.6 - Update zone: ? PASS (Updated: True, Name changed: True)
T6C.7 - Get zones by type: ? PASS (Functional zones: 2, Expected: 2)
T6C.8 - Element-Zone relationships: ? PASS (Elements in zone: 2, After remove: 1)
T6C.9 - Zone count and exists: ? PASS (Count: 2, Exists z1: True, Exists nonexistent: False)

=== Test Results ===
Passed: 9/9
Failed: 0/9
Status: ? ALL TESTS PASSED



=== Stage 6D Tests: Layout Repository & Domain Mapping ===

? Test 1 passed
? Test 2 passed
? Test 3 passed
? Test 4 passed
? Test 5 passed
? Test 6 passed
? Test 7 passed
? Test 8 failed

Stage 6D Results: 7 passed, 1 failed out of 8 tests



=== Stage 6E Tests: Layout Persistence Service ===

? Test 1 passed
? Test 2 passed
? Test 3 passed
? Test 4 passed
? Test 5 passed
? Test 6 passed
? Test 7 passed
? Test 8 passed

Stage 6E Results: 8 passed, 0 failed out of 8 tests



=== Stage 7A Tests: Pedestrian Models ===

? Test 1 passed
? Test 2 passed
? Test 3 passed
? Test 4 passed

Stage 7A Results: 4 passed, 0 failed out of 4 tests



=== Stage 7B Tests: Pedestrian Renderer ===

? Test 1 passed
? Test 2 passed
? Test 3 passed
? Test 4 passed

Stage 7B Results: 4 passed, 0 failed out of 4 tests



=== Stage 7C Tests: Pedestrian Tools ===

? Test 1 passed
? Test 2 passed
? Test 3 passed
? Test 4 passed

Stage 7C Results: 4 passed, 0 failed out of 4 tests



=== Stage 7D Tests: Database Integration ===

? Test 1 passed
? Test 2 passed
? Test 3 passed
? Test 4 passed

Stage 7D Results: 4 passed, 0 failed out of 4 tests



=== Stage 8A Tests: Conflict Rules Framework ===

? Test 1 passed
? Test 2 passed

Stage 8A Results: 2 passed, 0 failed out of 2 tests



=== Stage 8B Tests: Conflict Rule Implementations ===

? Test 1 passed
? Test 2 passed
? Test 3 passed
? Test 4 passed

Stage 8B Results: 4 passed, 0 failed out of 4 tests



=== Stage 8C Tests: Conflict Visualization ===

? Test 1 passed
? Test 2 passed
? Test 3 passed
? Test 4 passed

Stage 8C Results: 4 passed, 0 failed out of 4 tests



=== Stage 8D Tests: Database Integration ===

? Test 1 passed
? Test 2 passed
? Test 3 passed

Stage 8D Results: 3 passed, 0 failed out of 3 tests



=== Stage 9A Tests: Selection & Multi-Edit ===

? Test 1 passed
? Test 2 passed
? Test 3 passed
? Test 4 passed
? Test 5 passed

Stage 9A Results: 5 passed, 0 failed out of 5 tests



=== Stage 9B Tests: Snapping & Guides ===

? Test 1 passed
? Test 2 passed
? Test 3 passed
? Test 4 passed

Stage 9B Results: 4 passed, 0 failed out of 4 tests



=== Stage 9C Tests: Undo/Redo Enhancement ===

? Test 1 passed
? Test 2 passed
? Test 3 passed
? Test 4 passed

Stage 9C Results: 4 passed, 0 failed out of 4 tests



=== Stage 9D Tests: Property Panel Enhancements ===

? Test 1 passed
? Test 2 passed
? Test 3 passed

Stage 9D Results: 3 passed, 0 failed out of 3 tests



=== Stage 9E Tests: Database Integration ===

? Test 1 passed
? Test 2 passed

Stage 9E Results: 2 passed, 0 failed out of 2 tests



=== Stage 10A Tests: Query APIs ===

? Test 1 passed
? Test 2 passed
? Test 3 passed
? Test 4 passed
? Test 5 passed

Stage 10A Results: 5 passed, 0 failed out of 5 tests



=== Stage 10B Tests: Structured Exports ===

? Test 1 passed
? Test 2 passed
? Test 3 passed
? Test 4 passed

Stage 10B Results: 4 passed, 0 failed out of 4 tests



=== Stage 10D Tests: Database Integration ===

  GetWorkstations: 0ms
  GetElementsInZone: 0ms
  GetElementsInRegion: 0ms
  GetNearestWorkstation: 0ms
  GetConnectedTransport: 0ms
? Test 1 passed
  Report: 4 issues (1 errors, 2 warnings, 1 info)
  Statistics: 5 nodes, 3 workstations, 2 cranes
? Test 2 passed

Stage 10D Results: 2 passed, 0 failed out of 2 tests



=== Stage 11A Tests: Constraint Framework ===

? Test 1 passed
? Test 2 passed
? Test 3 passed
? Test 4 passed
? Test 5 passed
? Test 6 passed
? Test 7 passed
? Test 8 passed

Stage 11A Results: 8 passed, 0 failed out of 8 tests



=== Stage 11B Tests: Constrained Entity Interface ===

? Test 1 passed
? Test 2 passed
? Test 3 passed
? Test 4 passed
? Test 5 passed
? Test 6 passed
? Test 7 passed

Stage 11B Results: 7 passed, 0 failed out of 7 tests



=== Stage 11C Tests: Mode Toggle & Selection ===

? Test 1 passed
? Test 2 passed
[DEBUG] Logging to: R:\Layoutbak\Logs\LayoutLog.20251222_125307.log
[12:53:07.032] === HitTest START at (125.0, 125.0), frictionless=False, design=False ===
[12:53:07.034] Checking node terminals...
[12:53:07.037] === HitTest START at (125.0, 125.0), frictionless=True, design=False ===
[12:53:07.039] Checking GuidedTransport layer, visible=True
[12:53:07.039] Checking AGV stations (count=0)...
[12:53:07.040] HitTestAGVStations at (125.0, 125.0), designMode=False, radius=15
[12:53:07.041] Checking 0 AGV stations
[12:53:07.042]   No AGV station within hit radius
[12:53:07.042] No AGV station hit
[DEBUG] === HitTest END: Nothing hit, returning Canvas ===
? Test 3 passed
? Test 4 passed
[12:53:07.045] === HitTest START at (125.0, 125.0), frictionless=True, design=False ===
[12:53:07.046] Checking GuidedTransport layer, visible=True
[12:53:07.047] Checking AGV stations (count=0)...
[12:53:07.047] HitTestAGVStations at (125.0, 125.0), designMode=False, radius=15
[12:53:07.048] Checking 0 AGV stations
[12:53:07.048]   No AGV station within hit radius
[12:53:07.049] No AGV station hit
[DEBUG] === HitTest END: Nothing hit, returning Canvas ===
? Test 5 passed
[12:53:07.050] === HitTest START at (125.0, 125.0), frictionless=False, design=False ===
[12:53:07.051] Checking node terminals...
[12:53:07.051] === HitTest START at (125.0, 125.0), frictionless=True, design=False ===
[12:53:07.052] Checking GuidedTransport layer, visible=True
[12:53:07.052] Checking AGV stations (count=0)...
[12:53:07.053] HitTestAGVStations at (125.0, 125.0), designMode=False, radius=15
[12:53:07.053] Checking 0 AGV stations
[12:53:07.054]   No AGV station within hit radius
[12:53:07.054] No AGV station hit
[DEBUG] === HitTest END: Nothing hit, returning Canvas ===
[12:53:07.055] === HitTest START at (125.0, 125.0), frictionless=False, design=False ===
[12:53:07.055] Checking node terminals...
? Test 6 passed

Stage 11C Results: 6 passed, 0 failed out of 6 tests



=== Stage 11D Tests: Constrained Dragging ===

? Test 1 passed
? Test 2 passed
? Test 3 passed
? Test 4 passed
? Test 5 passed
[12:53:07.063] [CollisionDetector] CheckBoundaryViolation: position=(50.0, 50.0), projected=(50.0, 50.0), distance=0.00, parameter=0.785
? Test 6 passed
? Test 7 passed
? Test 8 passed
? Test 9 passed

Stage 11D Results: 9 passed, 0 failed out of 9 tests



=== Stage 11E Tests: Collision Detection ===

? Test 1 passed
[12:53:07.069] [CollisionDetector] CheckEOTCraneCollision: crane 'EOT' param=0.500, other 'EOT' param=0.500, distance=0.000
[12:53:07.070] [CollisionDetector] COLLISION DETECTED: distance 0.000 < 0.1
? Test 2 passed
? Test 3 passed
? Test 4 passed
[12:53:07.072] [CollisionDetector] CheckBoundaryViolation: position=(35.0, 35.0), projected=(35.4, 35.4), distance=0.50, parameter=0.785
[12:53:07.073] [CollisionDetector] CheckBoundaryViolation: position=(-50.0, 0.0), projected=(0.0, 50.0), distance=70.71, parameter=1.571
[12:53:07.073] [CollisionDetector] BOUNDARY VIOLATION: distance 70.71 > 1.0
? Test 5 passed
? Test 6 passed

Stage 11E Results: 6 passed, 0 failed out of 6 tests



=== Stage 11F Tests: Polish ===

? Test 1 passed
? Test 2 passed
? Test 3 passed
? Test 4 passed
? Test 5 passed
? Test 6 passed

Stage 11F Results: 6 passed, 0 failed out of 6 tests



=== Stage 11G Tests: Database Integration ===

? Test 1 failed with exception: Execute requires the command to have a transaction object when the connection assigned to the command is in a pending local transaction.  The Transaction property of the command has not been initialized.
